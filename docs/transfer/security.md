# Sécurité - Transfert de fichiers SHAREL

**Version:** 1.0  
**Date:** 2026-02-06  
**Auteur:** Generated by agent

## Menaces identifiées et mitigations

### 1. Session non authentifiée (CRITIQUE)

**Menace:** N'importe quel peer sur le LAN peut appeler `GET /session` et `GET /file/*`.

**Mitigation implémentée (v1.0):**
- `sessionId` (timestamp) généré à chaque démarrage du host.
- Token optionnel possible : à implémenter en v1.1.
- Vérification: client doit fournir sessionId dans les requêtes.

**Plan v1.1:**
- Ajouter `sessionToken` (UUID) avec expiration (ex: 30 min).
- Utiliser header `X-Session-Token` ou query param.
- Reject si token invalide / expiré.

### 2. Trusted devices (ROADMAP)

**À implémenter:** Mémoriser le "fingerprint" du dernier peer → skip accept/reject au prochain transfert.

### 3. Encryption (ROADMAP)

**Plan v2.0:**
- TLS local (self-signed cert) pour chiffrer le canal.
- Ou: AES-256-GCM sur le payload (fichiers).
- Requiert cryptographie (librairie `pointycastle` ou Dart `crypto`).

## Endpoints sécurisés (actuels + futurs)

```
GET /session
  Paramètres: sessionId (requis en v1.1)
  Réponse: { sessionId, token, expiresAt, items: [...] }
  
POST /approve (NEW en v1.1)
  Paramètres: clientId, deviceName
  Réponse: { approved: bool, token: "..." }
  
GET /file/<index>
  Paramètres: sessionId, token (v1.1)
  Réponse: stream octet
```

## Checklist sécurité avant v1.0 release

- ✅ sessionId généré.
- ⬜ Token avec expiration.
- ⬜ Rate limiting (prevent brute force).
- ⬜ Log tentatives accès non-auth.
- ⬜ TLS (future).

## Contre-mesures réseau

- Utiliser Wi‑Fi privé (pas réseau public).
- Désactiver le transfert si pas de permission Local Network (iOS).
- Afficher avertissement: "Assurez-vous que le Wi‑Fi est privé".
